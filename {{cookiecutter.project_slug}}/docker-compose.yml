version: '3.8'

services:
  {{ cookiecutter.project_slug }}:
    build: .
    container_name: {{ cookiecutter.project_slug }}
{% if cookiecutter.deployment_type == 'remote' -%}
    ports:
      - "${PORT:-{{ cookiecutter.server_port }}}:{{ cookiecutter.server_port }}"
{% endif -%}
    env_file:
      - .env
    environment:
      - PORT=${PORT:-{{ cookiecutter.server_port }}}
{% if cookiecutter.auth_mechanism == 'api_key' -%}
      - MCP_API_KEYS=${MCP_API_KEYS}
{% elif cookiecutter.auth_mechanism == 'oauth2' -%}
      - OAUTH_CLIENT_ID=${OAUTH_CLIENT_ID}
      - OAUTH_CLIENT_SECRET=${OAUTH_CLIENT_SECRET}
      - OAUTH_AUTH_URL=${OAUTH_AUTH_URL}
      - OAUTH_TOKEN_URL=${OAUTH_TOKEN_URL}
{% endif -%}
    restart: unless-stopped
